{"id":"Focm","dependencies":[{"name":"/home/gtah2mint/Workspace/smartserver/package.json","includedInParent":true,"mtime":1569250200108},{"name":"./generated/prisma-client","loc":{"line":9,"column":27},"parent":"/home/gtah2mint/Workspace/smartserver/src/index.js","resolved":"/home/gtah2mint/Workspace/smartserver/src/generated/prisma-client/index.js"}],"generated":{"js":"const e=process.env.PORT||3e3,r=require(\"express\"),s=require(\"body-parser\"),i=require(\"multer\"),o=require(\"multer-google-storage\"),a=require(\"fs\"),t=require(\"firebase\"),{prisma:l}=require(\"./generated/prisma-client\"),n=i({storage:o.storageEngine({bucket:\"smartimage\",projectID:\"imageserver-253203\",keyFilename:\"imageserver-fc3c49a14bf7.json\"})}),g=r();g.use(s.json()),g.get(\"/\",async(e,r)=>{r.send(\"api 서버\")}),g.post(\"/upload\",n.single(\"file\"),(e,r)=>{console.log(e.file),r.json({url:e.file.path})}),g.listen(e,r=>{if(r)throw r;console.log(`> Ready On Server http://localhost:${e}`)});"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","name":"port","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"index.js","name":"process","original":{"line":1,"column":13},"generated":{"line":1,"column":8}},{"source":"index.js","name":"env","original":{"line":1,"column":21},"generated":{"line":1,"column":16}},{"source":"index.js","name":"PORT","original":{"line":1,"column":25},"generated":{"line":1,"column":20}},{"source":"index.js","original":{"line":1,"column":33},"generated":{"line":1,"column":26}},{"source":"index.js","name":"express","original":{"line":3,"column":6},"generated":{"line":1,"column":30}},{"source":"index.js","name":"require","original":{"line":3,"column":16},"generated":{"line":1,"column":32}},{"source":"index.js","original":{"line":3,"column":24},"generated":{"line":1,"column":40}},{"source":"index.js","name":"bodyParser","original":{"line":4,"column":6},"generated":{"line":1,"column":51}},{"source":"index.js","name":"require","original":{"line":4,"column":19},"generated":{"line":1,"column":53}},{"source":"index.js","original":{"line":4,"column":27},"generated":{"line":1,"column":61}},{"source":"index.js","name":"Multer","original":{"line":5,"column":6},"generated":{"line":1,"column":76}},{"source":"index.js","name":"require","original":{"line":5,"column":15},"generated":{"line":1,"column":78}},{"source":"index.js","original":{"line":5,"column":23},"generated":{"line":1,"column":86}},{"source":"index.js","name":"multerGoogleStorage","original":{"line":6,"column":6},"generated":{"line":1,"column":96}},{"source":"index.js","name":"require","original":{"line":6,"column":28},"generated":{"line":1,"column":98}},{"source":"index.js","original":{"line":6,"column":36},"generated":{"line":1,"column":106}},{"source":"index.js","name":"fs","original":{"line":7,"column":6},"generated":{"line":1,"column":131}},{"source":"index.js","name":"require","original":{"line":7,"column":11},"generated":{"line":1,"column":133}},{"source":"index.js","original":{"line":7,"column":19},"generated":{"line":1,"column":141}},{"source":"index.js","name":"firebase","original":{"line":8,"column":6},"generated":{"line":1,"column":147}},{"source":"index.js","name":"require","original":{"line":8,"column":17},"generated":{"line":1,"column":149}},{"source":"index.js","original":{"line":8,"column":25},"generated":{"line":1,"column":157}},{"source":"index.js","original":{"line":9,"column":6},"generated":{"line":1,"column":170}},{"source":"index.js","name":"prisma","original":{"line":9,"column":8},"generated":{"line":1,"column":177}},{"source":"index.js","name":"require","original":{"line":9,"column":19},"generated":{"line":1,"column":180}},{"source":"index.js","original":{"line":9,"column":27},"generated":{"line":1,"column":188}},{"source":"index.js","name":"upload","original":{"line":11,"column":6},"generated":{"line":1,"column":217}},{"source":"index.js","name":"Multer","original":{"line":11,"column":15},"generated":{"line":1,"column":219}},{"source":"index.js","original":{"line":11,"column":22},"generated":{"line":1,"column":221}},{"source":"index.js","name":"storage","original":{"line":12,"column":2},"generated":{"line":1,"column":222}},{"source":"index.js","name":"multerGoogleStorage","original":{"line":12,"column":11},"generated":{"line":1,"column":230}},{"source":"index.js","name":"storageEngine","original":{"line":12,"column":31},"generated":{"line":1,"column":232}},{"source":"index.js","original":{"line":12,"column":45},"generated":{"line":1,"column":246}},{"source":"index.js","name":"bucket","original":{"line":13,"column":4},"generated":{"line":1,"column":247}},{"source":"index.js","original":{"line":13,"column":12},"generated":{"line":1,"column":254}},{"source":"index.js","name":"projectID","original":{"line":14,"column":4},"generated":{"line":1,"column":267}},{"source":"index.js","original":{"line":14,"column":15},"generated":{"line":1,"column":277}},{"source":"index.js","name":"keyFilename","original":{"line":15,"column":4},"generated":{"line":1,"column":298}},{"source":"index.js","original":{"line":15,"column":17},"generated":{"line":1,"column":310}},{"source":"index.js","name":"app","original":{"line":19,"column":6},"generated":{"line":1,"column":346}},{"source":"index.js","name":"express","original":{"line":19,"column":12},"generated":{"line":1,"column":348}},{"source":"index.js","name":"app","original":{"line":21,"column":0},"generated":{"line":1,"column":352}},{"source":"index.js","name":"use","original":{"line":21,"column":4},"generated":{"line":1,"column":354}},{"source":"index.js","name":"bodyParser","original":{"line":21,"column":8},"generated":{"line":1,"column":358}},{"source":"index.js","name":"json","original":{"line":21,"column":19},"generated":{"line":1,"column":360}},{"source":"index.js","name":"app","original":{"line":23,"column":0},"generated":{"line":1,"column":368}},{"source":"index.js","name":"get","original":{"line":23,"column":4},"generated":{"line":1,"column":370}},{"source":"index.js","original":{"line":23,"column":8},"generated":{"line":1,"column":374}},{"source":"index.js","original":{"line":23,"column":13},"generated":{"line":1,"column":378}},{"source":"index.js","name":"req","original":{"line":23,"column":20},"generated":{"line":1,"column":384}},{"source":"index.js","name":"res","original":{"line":23,"column":25},"generated":{"line":1,"column":386}},{"source":"index.js","name":"res","original":{"line":24,"column":2},"generated":{"line":1,"column":391}},{"source":"index.js","name":"send","original":{"line":24,"column":6},"generated":{"line":1,"column":393}},{"source":"index.js","original":{"line":24,"column":11},"generated":{"line":1,"column":398}},{"source":"index.js","name":"app","original":{"line":27,"column":0},"generated":{"line":1,"column":410}},{"source":"index.js","name":"post","original":{"line":27,"column":4},"generated":{"line":1,"column":412}},{"source":"index.js","original":{"line":27,"column":9},"generated":{"line":1,"column":417}},{"source":"index.js","name":"upload","original":{"line":27,"column":20},"generated":{"line":1,"column":427}},{"source":"index.js","name":"single","original":{"line":27,"column":27},"generated":{"line":1,"column":429}},{"source":"index.js","original":{"line":27,"column":34},"generated":{"line":1,"column":436}},{"source":"index.js","original":{"line":27,"column":43},"generated":{"line":1,"column":444}},{"source":"index.js","name":"req","original":{"line":27,"column":44},"generated":{"line":1,"column":445}},{"source":"index.js","name":"res","original":{"line":27,"column":49},"generated":{"line":1,"column":447}},{"source":"index.js","name":"console","original":{"line":28,"column":2},"generated":{"line":1,"column":452}},{"source":"index.js","name":"log","original":{"line":28,"column":10},"generated":{"line":1,"column":460}},{"source":"index.js","name":"req","original":{"line":28,"column":14},"generated":{"line":1,"column":464}},{"source":"index.js","name":"file","original":{"line":28,"column":18},"generated":{"line":1,"column":466}},{"source":"index.js","name":"res","original":{"line":29,"column":2},"generated":{"line":1,"column":472}},{"source":"index.js","name":"json","original":{"line":29,"column":6},"generated":{"line":1,"column":474}},{"source":"index.js","original":{"line":29,"column":11},"generated":{"line":1,"column":479}},{"source":"index.js","name":"url","original":{"line":29,"column":13},"generated":{"line":1,"column":480}},{"source":"index.js","name":"req","original":{"line":29,"column":18},"generated":{"line":1,"column":484}},{"source":"index.js","name":"file","original":{"line":29,"column":22},"generated":{"line":1,"column":486}},{"source":"index.js","name":"path","original":{"line":29,"column":27},"generated":{"line":1,"column":491}},{"source":"index.js","name":"app","original":{"line":44,"column":0},"generated":{"line":1,"column":500}},{"source":"index.js","name":"listen","original":{"line":44,"column":4},"generated":{"line":1,"column":502}},{"source":"index.js","name":"port","original":{"line":44,"column":11},"generated":{"line":1,"column":509}},{"source":"index.js","name":"err","original":{"line":44,"column":17},"generated":{"line":1,"column":511}},{"source":"index.js","name":"err","original":{"line":45,"column":6},"generated":{"line":1,"column":515}},{"source":"index.js","name":"err","original":{"line":45,"column":6},"generated":{"line":1,"column":518}},{"source":"index.js","original":{"line":45,"column":11},"generated":{"line":1,"column":520}},{"source":"index.js","name":"err","original":{"line":45,"column":17},"generated":{"line":1,"column":526}},{"source":"index.js","name":"console","original":{"line":46,"column":2},"generated":{"line":1,"column":528}},{"source":"index.js","name":"log","original":{"line":46,"column":10},"generated":{"line":1,"column":536}},{"source":"index.js","name":"port","original":{"line":46,"column":52},"generated":{"line":1,"column":578}}],"sources":{"index.js":"const port = process.env.PORT || 3000;\n\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst Multer = require(\"multer\");\nconst multerGoogleStorage = require(\"multer-google-storage\");\nconst fs = require(\"fs\");\nconst firebase = require(\"firebase\");\nconst { prisma } = require(\"./generated/prisma-client\");\n\nconst upload = Multer({\n  storage: multerGoogleStorage.storageEngine({\n    bucket: \"smartimage\",\n    projectID: \"imageserver-253203\",\n    keyFilename: \"imageserver-fc3c49a14bf7.json\"\n  })\n});\n\nconst app = express();\n\napp.use(bodyParser.json());\n\napp.get(\"/\", async (req, res) => {\n  res.send(\"api 서버\");\n});\n\napp.post(\"/upload\", upload.single(\"file\"), (req, res) => {\n  console.log(req.file);\n  res.json({ url: req.file.path });\n  // console.log(\"Upload Image\");\n  // let file = req.file;\n  // if (file) {\n  //   console.log(file.path);\n  //   uploadImageToStorage(file)\n  //     .then(success => {\n  //       res.json({ url: file.path });\n  //     })\n  //     .catch(error => {\n  //       console.error(error);\n  //     });\n  // }\n});\n\napp.listen(port, err => {\n  if (err) throw err;\n  console.log(`> Ready On Server http://localhost:${port}`);\n});\n"},"lineCount":null}},"error":null,"hash":"c592a3c19f039c2469ca2b0066cb47fd","cacheData":{"env":{}}}